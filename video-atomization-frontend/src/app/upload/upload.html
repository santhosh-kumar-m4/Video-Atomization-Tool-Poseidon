<div class="upload-container">
  <div class="header">
    <button class="btn-back" routerLink="/videos">Back to Videos</button>
    <h2>Upload Video</h2>
  </div>

  @if (uploadSuccess()) {
    <div class="success-message">
      Video uploaded successfully!
    </div>
  }

  @if (uploadError()) {
    <div class="error-message">
      {{ uploadError() }}
    </div>
  }

  <div 
    class="upload-area"
    [class.dragging]="isDragging()"
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
    (drop)="onDrop($event)"
  >
    @if (!selectedFile) {
      <div class="upload-content">
        <p class="upload-icon">ðŸ“¹</p>
        <p>Drag and drop your video here</p>
        <p class="or-text">or</p>
        <label for="file-input" class="file-button">Choose File</label>
        <input 
          type="file" 
          id="file-input" 
          accept="video/*" 
          (change)="onFileSelected($event)"
          style="display: none;"
        />
      </div>
    } @else {
      <div class="file-selected">
        <p>Selected: {{ selectedFile.name }}</p>
        <p class="file-size">{{ formatFileSize(selectedFile.size) }}</p>
        <div class="file-actions">
          <button (click)="clearSelection()">Change File</button>
          <button (click)="uploadVideo()" [disabled]="isUploading()">
            {{ isUploading() ? 'Uploading...' : 'Upload' }}
          </button>
        </div>
      </div>
    }
  </div>

  @if (isUploading()) {
    <div class="progress-container">
      <div class="progress-bar">
        <div class="progress-fill" [style.width.%]="uploadProgress()"></div>
      </div>
      <p class="progress-text">{{ uploadProgress() }}%</p>
    </div>
  }
</div>
